graph TD

A[GitHub Actions Workflow] --> B[Wysyła żądanie tokenu OIDC]
B --> C[GitHub OIDC Provider<br>token.actions.githubusercontent.com]
C --> D["Zwraca ID Token (JWT)"]

D --> E[AWS STS:AssumeRoleWithWebIdentity]
E -->|Sprawdza Trust Policy| F[Role IAM: GithubActionsRole]

F -->|Jeśli poprawna:<br>- OIDC Provider się zgadza<br>- sub pasuje<br>- thumbprint się zgadza| G[Token zaakceptowany<br>rola przyjęta]

F -->|Jeśli błędna:<br>- brak sub<br>- zły OIDC provider<br>- zły thumbprint| H[Błąd:<br>Not authorized to perform sts:AssumeRoleWithWebIdentity]
